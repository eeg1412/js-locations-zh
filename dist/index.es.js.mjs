const e="js-locations-zh-cache",n="translations",t="meta",o="1.0.10";let a=null,r=null;const i=/* @__PURE__ */new Map;function s(){try{return"undefined"!=typeof indexedDB&&null!==indexedDB}catch(e){return!1}}async function c(){return s()?a||(r||(r=new Promise((n,a)=>{const i=indexedDB.open(e);i.onerror=()=>{r=null,n(null)},i.onsuccess=async e=>{const r=e.target.result;try{if(r.objectStoreNames.contains(t)){const e=r.transaction([t],"readonly"),i=e.objectStore(t).get("version");i.onsuccess=async()=>{const e=i.result?.value;r.close(),e&&e!==o&&await m(),u(n,a)},i.onerror=()=>{r.close(),u(n,a)}}else r.close(),u(n,a)}catch(i){r.close(),u(n)}},i.onupgradeneeded=()=>{}}),r)):null}function u(i,s){const c=indexedDB.open(e,2);c.onerror=()=>{r=null,i(null)},c.onsuccess=e=>{a=e.target.result,async function(){if(!a)return;return new Promise((e,n)=>{try{const r=a.transaction([t],"readwrite");r.objectStore(t).put({key:"version",value:o}),r.oncomplete=()=>e(),r.onerror=()=>n(r.error)}catch(r){n(r)}})}().catch(()=>{}),i(a)},c.onupgradeneeded=e=>{const o=e.target.result;if(!o.objectStoreNames.contains(n)){o.createObjectStore(n,{keyPath:"id"}).createIndex("country","country",{unique:!1})}o.objectStoreNames.contains(t)||o.createObjectStore(t,{keyPath:"key"})}}async function m(){return new Promise((n,t)=>{a&&(a.close(),a=null);const o=indexedDB.deleteDatabase(e);o.onsuccess=()=>n(),o.onerror=()=>t(o.error),o.onblocked=()=>{setTimeout(()=>{const t=indexedDB.deleteDatabase(e);t.onsuccess=()=>n(),t.onerror=()=>n()},100)}})}function l(e){const n={};for(const[t,o]of e)o instanceof Map?n[t]={__isMap:!0,data:l(o)}:n[t]=o;return n}function j(e){const n=/* @__PURE__ */new Map;for(const[t,o]of Object.entries(e))o&&"object"==typeof o&&o.__isMap?n.set(t,j(o.data)):n.set(t,o);return n}async function p(e){const t=await c();return t?new Promise(o=>{try{const a=t.transaction([n],"readonly"),r=a.objectStore(n).get(e);r.onsuccess=()=>{r.result&&r.result.data?o(j(r.result.data)):o(null)},r.onerror=()=>o(null)}catch(a){o(null)}}):null}const d=/* @__PURE__ */new Set(["Australia","China","Japan","Thailand","India","Malaysia","Korea (the Republic of)","Singapore","Hong Kong","Taiwan (Province of China)","United States of America","Viet Nam","Netherlands (Kingdom of the)","Ireland","Germany","Argentina","France","Canada","Sweden","United Kingdom of Great Britain and Northern Ireland","Spain","Czechia","Belgium","Switzerland","Austria","Italy","Greece","Russian Federation","Denmark","Portugal","Ghana","Finland","Poland","Romania","Norway","Luxembourg","Bulgaria","Mexico","Moldova (the Republic of)","Latvia","Lithuania","Croatia","Estonia","Slovakia","Hungary","Malta","Cyprus","Zambia","Slovenia","Isle of Man","Albania","Papua New Guinea","Fiji","Macao","Tunisia","Paraguay","Botswana","Sudan","Gambia","Sierra Leone"]);let _=!0;const f=/* @__PURE__ */new Map,y=/* @__PURE__ */new Map;function h(e){_=e}function g(){return _}async function w(e){const n=e.replace(/[^a-zA-Z0-9]/g,"_");return(await((e,n,t)=>{const o=e[n];return o?"function"==typeof o?o():Promise.resolve(o):new Promise((e,o)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(o.bind(null,/* @__PURE__ */new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})})(/* @__PURE__ */Object.assign({"./countries/Albania.js":()=>import("./Albania-DvOszYiA.mjs"),"./countries/Argentina.js":()=>import("./Argentina-CFWUIvTJ.mjs"),"./countries/Australia.js":()=>import("./Australia-B629Moz3.mjs"),"./countries/Austria.js":()=>import("./Austria-BeTJU_tE.mjs"),"./countries/Belgium.js":()=>import("./Belgium-B9jVX0Ug.mjs"),"./countries/Botswana.js":()=>import("./Botswana-Bk3aW-OG.mjs"),"./countries/Bulgaria.js":()=>import("./Bulgaria-BqIQZLkZ.mjs"),"./countries/Canada.js":()=>import("./Canada-CH6b-Tjr.mjs"),"./countries/China.js":()=>import("./China-BtAKnNbS.mjs"),"./countries/Croatia.js":()=>import("./Croatia-COwFiIaW.mjs"),"./countries/Cyprus.js":()=>import("./Cyprus-C3nskqIQ.mjs"),"./countries/Czechia.js":()=>import("./Czechia-D9kXkBol.mjs"),"./countries/Denmark.js":()=>import("./Denmark-O1sZck6q.mjs"),"./countries/Estonia.js":()=>import("./Estonia-BAJWmlwK.mjs"),"./countries/Fiji.js":()=>import("./Fiji-Dm-CKeBa.mjs"),"./countries/Finland.js":()=>import("./Finland-CtxgmQtM.mjs"),"./countries/France.js":()=>import("./France-Csl2j12W.mjs"),"./countries/Gambia.js":()=>import("./Gambia-BmGGD59e.mjs"),"./countries/Germany.js":()=>import("./Germany-6g0_45B1.mjs"),"./countries/Ghana.js":()=>import("./Ghana-BEr_2Qoh.mjs"),"./countries/Greece.js":()=>import("./Greece-C4COs4w3.mjs"),"./countries/Hong_Kong.js":()=>import("./Hong_Kong-DQJz6qSw.mjs"),"./countries/Hungary.js":()=>import("./Hungary-BXuTuzwF.mjs"),"./countries/India.js":()=>import("./India-CIl17ziF.mjs"),"./countries/Ireland.js":()=>import("./Ireland-CEyx5OiY.mjs"),"./countries/Isle_of_Man.js":()=>import("./Isle_of_Man-Cmliuj03.mjs"),"./countries/Italy.js":()=>import("./Italy-D_AsLmw6.mjs"),"./countries/Japan.js":()=>import("./Japan-Df95AjPq.mjs"),"./countries/Korea__the_Republic_of_.js":()=>import("./Korea__the_Republic_of_-Dsb1t6Ag.mjs"),"./countries/Latvia.js":()=>import("./Latvia-DUcksd7a.mjs"),"./countries/Lithuania.js":()=>import("./Lithuania-nrsExh8R.mjs"),"./countries/Luxembourg.js":()=>import("./Luxembourg-DD2Q5C9G.mjs"),"./countries/Macao.js":()=>import("./Macao-BMAZZ4cy.mjs"),"./countries/Malaysia.js":()=>import("./Malaysia-D7BZTsbQ.mjs"),"./countries/Malta.js":()=>import("./Malta-C2akbD5A.mjs"),"./countries/Mexico.js":()=>import("./Mexico-C2mLaaGi.mjs"),"./countries/Moldova__the_Republic_of_.js":()=>import("./Moldova__the_Republic_of_-3IVbOxBp.mjs"),"./countries/Netherlands__Kingdom_of_the_.js":()=>import("./Netherlands__Kingdom_of_the_-B1C9vgPL.mjs"),"./countries/Norway.js":()=>import("./Norway-DL7zzgeZ.mjs"),"./countries/Papua_New_Guinea.js":()=>import("./Papua_New_Guinea-BMbPvVFs.mjs"),"./countries/Paraguay.js":()=>import("./Paraguay-DDVd120N.mjs"),"./countries/Poland.js":()=>import("./Poland-eVPtULCo.mjs"),"./countries/Portugal.js":()=>import("./Portugal-CcQcBxpA.mjs"),"./countries/Romania.js":()=>import("./Romania-CYuMy8hx.mjs"),"./countries/Russian_Federation.js":()=>import("./Russian_Federation-ChkJJkfc.mjs"),"./countries/Sierra_Leone.js":()=>import("./Sierra_Leone-DNo153Sc.mjs"),"./countries/Singapore.js":()=>import("./Singapore-BNQxcpAf.mjs"),"./countries/Slovakia.js":()=>import("./Slovakia-Dftgo6VC.mjs"),"./countries/Slovenia.js":()=>import("./Slovenia-ZuBcuhbW.mjs"),"./countries/Spain.js":()=>import("./Spain-DGGEtQ-x.mjs"),"./countries/Sudan.js":()=>import("./Sudan-B3gyW6fG.mjs"),"./countries/Sweden.js":()=>import("./Sweden-DJk6xT8Q.mjs"),"./countries/Switzerland.js":()=>import("./Switzerland-CGAL8dMy.mjs"),"./countries/Taiwan__Province_of_China_.js":()=>import("./Taiwan__Province_of_China_-DqhM0xz0.mjs"),"./countries/Thailand.js":()=>import("./Thailand-B-Bh6roF.mjs"),"./countries/Tunisia.js":()=>import("./Tunisia-Djtfq_kK.mjs"),"./countries/United_Kingdom_of_Great_Britain_and_Northern_Ireland.js":()=>import("./United_Kingdom_of_Great_Britain_and_Northern_Ireland-jaKNg94O.mjs"),"./countries/United_States_of_America.js":()=>import("./United_States_of_America-CfiwICTq.mjs"),"./countries/Viet_Nam.js":()=>import("./Viet_Nam-Dl3KiuiQ.mjs"),"./countries/Zambia.js":()=>import("./Zambia-BC2nkiBr.mjs")}),`./countries/${n}.js`,3)).default}async function S(e,t){if(_&&s())try{const o=await async function(e,t){if(i.has(e))return i.get(e);const o=(async()=>{const o=await c();return!!o&&new Promise(a=>{try{const r=o.transaction([n],"readwrite"),s=r.objectStore(n),c={id:e,country:e,data:l(t),timestamp:Date.now()};s.put(c),r.oncomplete=()=>{i.delete(e),a(!0)},r.onerror=()=>{i.delete(e),a(!1)}}catch(r){i.delete(e),a(!1)}})})();return i.set(e,o),o}(e,t);o&&f.delete(e)}catch(o){console.warn(`Failed to cache data for ${e}:`,o)}}async function b(e){if(!d.has(e))throw new Error(`Country '${e}' not found in translations`);if(y.has(e))return y.get(e);const n=(async()=>{if(_&&s())try{const n=await p(e);if(n)return y.delete(e),{default:n}}catch(t){}const n=await w(e);return f.set(e,n),_&&s()&&Promise.resolve().then(()=>{S(e,n).catch(()=>{})}),y.delete(e),{default:n}})();return y.set(e,n),n}function M(){return Array.from(d)}async function P(){return!!s()&&async function(){const e=await c();return!!e&&new Promise(t=>{try{const o=e.transaction([n],"readwrite");o.objectStore(n).clear(),o.oncomplete=()=>t(!0),o.onerror=()=>t(!1)}catch(o){t(!1)}})}()}async function v(){if(s())return m()}function C(){return o}function N(){a&&(a.close(),a=null,r=null)}async function B(e){const n=[],t=[];for(const a of e)try{await b(a),n.push(a)}catch(o){t.push(a)}return{success:n,failed:t}}export{v as clearAllCache,P as clearTranslationCache,N as closeCache,M as getAllCountries,C as getCacheVersionInfo,b as getCountryData,g as getUseIndexedDB,B as preloadCountries,h as setUseIndexedDB};
